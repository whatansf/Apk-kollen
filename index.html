<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>APK‑kollen – Systembolaget</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4296884380555879"
     crossorigin="anonymous"></script>
<style>
:root {
  --bg: #f3f4f6;
  --card: #ffffff;
  --muted: #6b7280;
  --accent: #22c55e;
  --border: #d1d5db;
  --text: #111827;
  --high-apk: #22c55e;
  --med-apk: #facc15;
  --low-apk: #ef4444;
  --shadow: rgba(0,0,0,0.05);
}
body {
  margin:0; padding:1rem;
  background:linear-gradient(to bottom, #f3f4f6 0%, #e0f2fe 100%);
  font-family:system-ui, sans-serif;
  color:var(--text);
}
h1{text-align:center; font-size:1.8rem; margin-bottom:0.3rem; letter-spacing:1px; color:#1e40af;}
.small{text-align:center;color:var(--muted); margin-bottom:0.5rem; font-size:0.9rem;}
.legend{text-align:center;font-size:0.85rem;margin-bottom:1rem;color:var(--muted);}
.legend span{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:4px;vertical-align:middle;}
.controls{display:flex;flex-wrap:wrap;gap:0.5rem;justify-content:center;margin-bottom:1rem;}
input,select,button{padding:0.4rem 0.6rem;font-size:0.85rem;border-radius:6px;border:1px solid var(--border);background:#fff;color:var(--text);transition:all 0.2s;}
input::placeholder{color:#9ca3af;}
button{cursor:pointer;}
button:hover:not(:disabled){border-color:var(--accent); color:var(--accent);}
button:disabled{opacity:0.5; cursor:not-allowed;}
.product-list{display:flex; flex-direction:column; gap:0.5rem;}
.product-item{
  border-radius:12px;
  padding:0.6rem 0.8rem;
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-size:0.9rem;
  transition:transform 0.2s, box-shadow 0.2s, opacity 0.5s;
  border:1px solid var(--border);
  background:var(--card);
  box-shadow:0 2px 6px var(--shadow);
  opacity:0;
  transform: translateY(10px);
}
.product-item.show{
  opacity:1;
  transform: translateY(0);
}
.product-item:hover{
  transform:translateY(-2px);
  box-shadow:0 6px 12px var(--shadow);
}
.product-info{display:flex; flex-direction:column; gap:0.2rem;}
.apk-dot{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:5px;vertical-align:middle;}
.fav{cursor:pointer;color:#9ca3af;margin-left:0.5rem;transition:color 0.2s;}
.fav.active{color:#ef4444;}
.link a{color:var(--accent); text-decoration:none;}
.link a:hover{text-decoration:underline;}
.pagination{margin-top:1rem;display:flex;justify-content:center;gap:0.5rem;font-size:0.85rem;}
.pagination button{padding:0.4rem 0.6rem;}
@media (max-width: 500px){
  .controls{flex-direction:column; gap:0.4rem;}
  .product-item{flex-direction:column; align-items:flex-start; gap:0.3rem;}
  .pagination{flex-direction:column; gap:0.3rem;}
}
</style>
</head>
<body>
<h1>APK‑kollen</h1>
<div class="small">Mest alkohol per krona – Systembolagets sortiment</div>
<div class="legend">APK: <span style="background: var(--high-apk);"></span> Hög | <span style="background: var(--med-apk);"></span> Medium | <span style="background: var(--low-apk);"></span> Låg</div>

<div class="controls">
<input type="text" id="search" placeholder="Sök namn...">
<button onclick="resetFilters()">Återställ</button>
</div>

<div class="product-list" id="productList"></div>

<script>
// Lokala produkter som alltid visas
const products=[
  {id:1,name:"Absolut Vodka",type:"Spritsort",price:199,abv:40,volume:0.7},
  {id:2,name:"Norrlands Guld",type:"Öl",price:25,abv:5,volume:0.5},
  {id:3,name:"Jack Daniels",type:"Spritsort",price:299,abv:40,volume:0.7},
  {id:4,name:"Rosévin",type:"Vin",price:89,abv:12,volume:0.75},
  {id:5,name:"Coca-Cola Vodka",type:"Mix",price:49,abv:12,volume:0.5}
];

let filtered=[...products];
const favorites=new Set();

function calculateAPK(d){ return (d.abv*d.volume)/d.price; }

function createItemHTML(d){
  const apk=calculateAPK(d);
  let color=apk>0.1?'--high-apk':(apk>0.05?'--med-apk':'--low-apk');
  return `<div class="product-item">
    <div class="product-info">
      <span><span class="apk-dot" style="background: var(${color});"></span>${d.name}</span>
      <span>Pris: ${d.price} kr | ABV: ${d.abv}% | Volym: ${d.volume} l | APK: ${apk.toFixed(4)}</span>
    </div>
    <div class="link"><a href="https://www.systembolaget.se/dryck/produkt/${d.id}" target="_blank" rel="noopener noreferrer">Systembolaget</a></div>
  </div>`;
}

function renderPage(){
  const list=document.getElementById("productList");
  list.innerHTML="";
  filtered.sort((a,b)=>calculateAPK(b)-calculateAPK(a)); // bästa först
  filtered.forEach(d=>{
    const div=document.createElement("div");
    div.innerHTML=createItemHTML(d);
    div.firstChild.classList.add("product-item");
    list.appendChild(div.firstChild);
    setTimeout(()=>div.firstChild.classList.add("show"),50);
  });
}

function applySearch(){
  const q=document.getElementById("search").value.toLowerCase();
  filtered=products.filter(d=>d.name.toLowerCase().includes(q));
  renderPage();
}

function resetFilters(){
  document.getElementById("search").value="";
  filtered=[...products];
  renderPage();
}

document.getElementById("search").addEventListener("input",applySearch);

// Rendera sidan direkt
renderPage();
</script>
</body>
</html>
